# File: httpd-vhosts.conf

# ==================== PORTA 8081 BACKUP/SVILUPPO ====================
<VirtualHost *:8081>
    ServerAdmin webmaster@localhost
    ServerName zanserver.sytes.net

    ProxyPreserveHost On

    <Proxy *>
        Require all granted
    </Proxy>

    # ================== ELEVEN ASSISTANT HTTP ==================
    Alias /eleven "C:/filepubblici/Eleven_Assistent/"
    <Directory "C:/filepubblici/Eleven_Assistent/">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.html
    </Directory>
    # ====================================================================

    <Location />
        Require all granted
    </Location>

    # ESCLUSIONI DAL PROXY
    ProxyPass /eleven !
    ProxyPass /phpmyadmin !

    # BACKUP PROXY CONFIGURATION
    # (Specific first, then generic)

    # GymTracker (test su 8081)
    Alias /gymtracker "C:/filepubblici/gymtracker/public/"
    <Directory "C:/filepubblici/gymtracker/public/">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.html
    </Directory>
    ProxyPass /gymtracker/api/ http://localhost:3010/api/
    ProxyPassReverse /gymtracker/api/ http://localhost:3010/api/
    ProxyPass /api/ http://localhost:3000/api/
    ProxyPassReverse /api/ http://localhost:3000/api/

    ProxyPass /app1/ http://localhost:3000/
    ProxyPassReverse /app1/ http://localhost:3000/

    ProxyPass /app2/ http://localhost:3001/
    ProxyPassReverse /app2/ http://localhost:3001/

    ProxyPass /api/zanflow/ http://localhost:3002/api/zanflow/
    ProxyPassReverse /api/zanflow/ http://localhost:3002/api/zanflow/

    ProxyPass /oauth2callback http://localhost:3000/oauth2callback
    ProxyPassReverse /oauth2callback http://localhost:3000/oauth2callback

    # PhpMyAdmin alias
    Alias /phpmyadmin "C:/xampp/phpMyAdmin/"
    <Directory "C:/xampp/phpMyAdmin">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog "logs/zanserver-port8081-error.log"
    CustomLog "logs/zanserver-port8081-access.log" combined
</VirtualHost>

# ==================== PORTA 8080 SVILUPPO LOCALE ====================
<VirtualHost *:8080>
    ServerAdmin webmaster@localhost
    DocumentRoot "C:/xampp/htdocs"
    ServerName localhost

    <Directory "C:/xampp/htdocs">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    # PhpMyAdmin per sviluppo locale
    Alias /phpmyadmin "C:/xampp/phpMyAdmin/"
    <Directory "C:/xampp/phpMyAdmin/">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.php
    </Directory>

    ErrorLog "logs/localhost-error.log"
    CustomLog "logs/localhost-access.log" combined
</VirtualHost>

# ==================== PORTA 8082 FILE PUBBLICI ====================
<VirtualHost *:8082>
    ServerAdmin webmaster@localhost
    DocumentRoot "C:/filepubblici"
    ServerName filepubblici.localhost

    <Directory "C:/filepubblici">
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog "logs/filepubblici-error.log"
    CustomLog "logs/filepubblici-access.log" combined
</VirtualHost>
